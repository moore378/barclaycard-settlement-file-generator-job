# Setting Up Authorization Processors

These steps are for setting up an Authorization Processor on a Developer's
machine and should not be followed exactly for a Development, Testing,
or a Production Server. For those environments, the certificate must not
be self signed and instead be generated by the Certificate Authority that
is associated to the machine.



1. Register the services at the given URLs.
   a. Run RegisterServiceNamespace.bat in an administrative command prompt.
   TODO: Have each individual Processor register their own service.

2. Make a certificate to use as a Dev Certification Authority.
   a. Run MakeSignRoot.bat in an administrative command prompt.
   b. At "Create Private Key Password" dialog box, enter in any value for the 
      "Password" and "Confirm Password" text boxes.
   c. At "Enter Private Key Password" dialog box, enter in the same value for 
      the "Password" text box.
   NOTE: This will create two files, signroot.cer and SignRoot.pvk. The 
   certificate will already be added to the Computer's Personal Certificate.
   If the files are already there (from a prior run), then there will only
   be the "Enter Private Key Password" dialog box prompt.

3. Set up the Dev Certification Authority as trusted.
   a. Run mmc.
   b. Select File->Add/Remove Snap-in.
   c. Add "Certificates" snap-in.
   d. On "Certificates snap-in" dialog box, select "Computer account".
   e. On "Select Computer" dialog box, select "Local computer".
   f. Move "Dev Certification Authority" from Personal's Certificates to 
      Trusted Root Certification Authorities's Certificates.

4. Create the certificate to use for the port.
   a. MakeCertificate.bat in an administrative command prompt.
      NOTE: This will make a certificate that uses the machine's name in
      the -cn parameter.
   b. On the "Enter Private Key Password" prompt, enter in the same value 
      entered from creating the certificate from #2.

5. Take note of the thumbprint of the certificate from #4.
   a. In the same Certificates snap-in, go to Personal's Certificate.
   b. Open up the Issued To entry for the machine name that was Issued By
      the Dev Certification Authority.
   c. Go to the Details tab.
   d. Look for the Thumbprint field. Copy the Value and remove all spaces.

6. Register the certificate with the port.
   a. Run RegisterCert.bat [thumbprint] in an administrative command prompt.
      Use the thumbprint from #5 as the parameter.
      NOTE: If the thumbprint was highlighted and copied from the Details tab,
      then Unicode formatting may have been preserved. Open up the file again
      and make sure that there are no "?" prefixes added to the pasted value.


NOTE: When testing servers and clients being from different machines, only
generate the certificate authority once (Step #2). Import the certificate
authority's certificate to all machines. This will allow SSL to resolve 
to the same authority and establish the trust relationship. Again, in a 
production or a lab environment that the certificate needs to be generated
normally instead of using self-signed certificates.

Source: [http://www.codeproject.com/Articles/24027/SSL-with-Self-hosted-WCF-Service](http://www.codeproject.com/Articles/24027/SSL-with-Self-hosted-WCF-Service)
Source: \transaction-management\IsraelProcessor\IsraelProcessor\SettingUp.md.

